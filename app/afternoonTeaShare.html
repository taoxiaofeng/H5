<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">

<head>
    <title>我承认，我需要减压</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="screen-orientation" content="portrait">
    <!-- uc强制竖屏 -->
    <meta name="x5-orientation" content="portrait">
    <!-- QQ强制竖屏 -->
    <meta name="share-title" content="我承认，我需要减压!!!">
    <!--<meta name="share-desc" content="让每天上班变成幸福一件事。">-->
    <meta name="description" content="让每天上班变成幸福一件事。">
    <!-- 分享描述 -->
    <meta name="shareLink" content="">
    <!--  分享链接 -->
    <meta name="shareImg" content="">
    <!-- 分享图片 -->
    <!-- build:css(.tmp) styles/afternoonTeaShare.css -->
    <link rel="stylesheet" href="styles/swiper/swiper-3.3.1.min.css">
    <link rel="stylesheet" href="styles/swiper/swiper.css">
    <link rel="stylesheet" href="styles/afternoonTeaShare/afternoonTeaShare.css">
    <link rel="stylesheet" href="styles/animate/animate.min.css">
    <!-- endbuild -->
</head>

<body>
    <img src="images/afternoonTeaShare/Share-icon.jpg" style="position: absolute;top:0;z-index: -100000;left: -100%" id="shareIcon" />
    <script>
    window.onresize = function() {
        _winWidth = document.body.clientWidth || document.documentElement.clientWidth, _style = document.getElementsByTagName("html")[0].style;
        _winWidth = _winWidth >= 1300 && devicePixelRatio == 1 ? 750 : _winWidth;
        _style.fontSize = _winWidth / 7.5 + "px"
    };
    var scale = 1 / devicePixelRatio;

    document.querySelector('meta[name="viewport"]').setAttribute('content', 'initial-scale=' + scale + ', maximum-scale=' + scale + ', minimum-scale=' + scale + ', user-scalable=no');
    window.onresize();
    </script>
    <!-- Swiper -->
    <!-- /container -->
    <div class="up-arrow" id="up-arrow">
        <img class="up-arrow-1" src="./images/up-icon/icon-yd03.png">
    </div>
    <div class="swiper-container swiper-container-vertical" id="fullPage">
        <div class="swiper-wrapper">
            <!-- 第一个页面-->
            <div class="swiper-slide a">
                <img class="guide" src="images/afternoonTeaShare/guide.jpg">
                <img class="ljxwc-button swiper-next" src="images/afternoonTeaShare/ljxwc.png">
                <img class="msdg-button" src="images/afternoonTeaShare/msdg.png" onclick="asSoonOrder()">
            </div>
            <!-- 第二个页面-->
            <div class="swiper-slide a">
                <img class="two-1" src="images/afternoonTeaShare/p1.jpg">
            </div>
            <!-- 第三个页面-->
            <div class="swiper-slide a">
                <img class="three-1" src="images/afternoonTeaShare/p2.jpg">
            </div>
            <!-- 第四个页面-->
            <div class="swiper-slide a">
                <img class="four-1" src="images/afternoonTeaShare/p3.jpg">
            </div>
            <!-- 第五个页面-->
            <div class="swiper-slide a">
                <img class="five-1" src="images/afternoonTeaShare/p4.jpg">
            </div>
            <!-- 第六个页面-->
            <div class="swiper-slide a">
                <img class="six-1" src="images/afternoonTeaShare/p5.jpg">
            </div>
            <!-- 第七个页面-->
            <div class="swiper-slide a">
                <img class="seven-1" src="images/afternoonTeaShare/p6.jpg">
            </div>
            <!-- 第八个页面-->
            <div class="swiper-slide a">
                <img class="eight-1" src="images/afternoonTeaShare/p7.jpg">
                <img class="eight-msdg" src="images/afternoonTeaShare/msxg-button.png" onclick="asSoonOrder()">
            </div>
        </div>
        <!-- build:js scripts/afternoonTeaShare-vendor.js -->
        <script type="text/javascript" src="scripts/jquery/jquery-2.2.4.min.js"></script>
        <script type="text/javascript" src="scripts/swiper/swiper-3.3.1.jquery.min.js"></script>
        <script type="text/javascript" src="scripts/swiper/swiper.min.js"></script>
        <script type="text/javascript" src="scripts/swiper/swiper.animate.min.js"></script>
        <script type="text/javascript" src="scripts/swiper/swiper3.07.js"></script>
        <script type="text/javascript" src="scripts/fullpage/fullpage.min.js"></script>
        <script type="text/javascript" src="scripts/jweixin-1.0.0.js"></script>
        <!-- endbuild -->
        <!-- Initialize Swiper -->
        <script type="text/javascript" src="config/cfg.js"></script>
    </div>
    </div>
    <!-- Initialize Swiper -->
    <script type="text/javascript">
    var swiper = new Swiper('.swiper-container', {
        loop: false, //环路滑动
        /*pagination: '.swiper-pagination',*/ //分页显示符
        direction: 'vertical', //Swiper运动主要有两种模式，horizontal(水平滑动)以及vertical（垂直运动的滑动）,
        slidesPerView: 1,
        paginationClickable: true,
        spaceBetween: 30,
        mousewheelControl: true, //鼠标滚轮控制
        grabCursor: true,
        paginationType: 'fraction',
        // 如果需要前进后退按钮
        nextButton: '.swiper-next',
        prevButton: '.swiper-button-prev',


        /*初始化时隐藏元素并在需要的时刻开始动画*/
        onInit: function(swiper) { //Swiper2.x的初始化是onFirstInit
            /* alert(swiper.activeIndex);*/ //提示Swiper的当前索引
            swiperAnimateCache(swiper); //隐藏动画元素
            swiperAnimate(swiper); //初始化完成开始动画
        },
        onSlideChangeEnd: function(swiper) {
            /* alert('事件触发了!!!');*/
            swiperAnimate(swiper); //每个slide切换结束时也运行当前slide动画
        }
    });

    function asSoonOrder() {
        window.location.href = cfg.BURL + '?route=tea';
        console.log("我是马上订购");
    }
    $(function() {
        $('#fullPage').fullpage({
            // sectionsColor : ['#ffef03','00d19a'],
            'onLeave': function(index) {}
        });

        function wxShare() {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                contentType: 'application/json',
                url: window.cfg.BBiz + '/manager/get_jsapi_ticket',
                processData: true,
                data: JSON.stringify({
                    'authUrl': window.location.href.split('#')[0]
                }),
                success: function(res) {
                    //                    alert(res.appid);
                    if (res) {
                        if (res.signature != undefined && res.signature != "") {
                            wx.config({
                                debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                                appId: res.appid, // 必填，公众号的唯一标识
                                timestamp: res.timestamp, // 必填，生成签名的时间戳
                                nonceStr: res.noncestr, // 必填，生成签名的随机串
                                signature: res.signature, // 必填，签名，见附录1
                                jsApiList: ['onMenuShareTimeline', 'onMenuShareAppMessage'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                            });
                            wx.ready(function() {
                                var title = document.getElementsByTagName("title")[0].innerHTML || "好品";
                                var desc = document.querySelector("meta[name=description]").content || "来自好品";
                                var imgUrl = document.getElementById('shareIcon').src || document.getElementsByTagName("img")[0].src;
                                var linkUrl = document.querySelector("meta[name=shareLink]").content || window.location.href;

                                wx.onMenuShareTimeline({
                                    title: title,
                                    desc: desc,
                                    link: linkUrl, // 分享链接
                                    imgUrl: imgUrl, // 分享图标
                                    success: function() {
                                        // 用户确认分享后执行的回调函数
                                    },
                                    cancel: function() {
                                        // 用户取消分享后执行的回调函数
                                    }
                                });
                                wx.onMenuShareAppMessage({
                                    title: title, // 分享标题
                                    desc: desc, // 分享描述
                                    link: linkUrl, // 分享链接
                                    imgUrl: imgUrl, // 分享图标
                                    type: '', // 分享类型,music、video或link，不填默认为link
                                    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                                    success: function() {
                                        // 用户确认分享后执行的回调函数
                                    },
                                    cancel: function() {
                                        // 用户取消分享后执行的回调函数
                                    }
                                });
                            })
                        }
                    }
                }
            })
        }

        wxShare();
    });
    </script>
</body>

</html>